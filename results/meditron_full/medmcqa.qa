nohup: ignoring input
2024-10-30:10:24:32,336 INFO     [__main__.py:279] Verbosity set to INFO
2024-10-30:10:24:39,094 INFO     [__init__.py:459] The tag 'arc_ca' is already registered as a group, this tag will not be registered. This may affect tasks you want to call.
2024-10-30:10:24:39,102 INFO     [__init__.py:459] The tag 'arc_ca' is already registered as a group, this tag will not be registered. This may affect tasks you want to call.
2024-10-30:10:24:42,713 INFO     [__main__.py:376] Selected Tasks: ['medmcqa']
2024-10-30:10:24:42,715 INFO     [evaluator.py:164] Setting random seed to 0 | Setting numpy seed to 1234 | Setting torch manual seed to 1234 | Setting fewshot manual seed to 1234
2024-10-30:10:24:42,715 INFO     [evaluator.py:201] Initializing hf model, with arguments: {'pretrained': 'epfl-llm/meditron-7b', 'dtype': 'float16', 'low_cpu_mem_usage': True, 'trust_remote_code': True, 'peft': '/mnt/dg_tunning/full_meditron_7b'}
2024-10-30:10:24:42,962 WARNING  [other.py:349] Detected kernel version 5.4.0, which is below the recommended minimum of 5.5.0; this can cause the process to hang. It is recommended to upgrade the kernel to the minimum version or higher.
2024-10-30:10:24:42,962 INFO     [huggingface.py:129] Using device 'cuda'
2024-10-30:10:24:43,068 INFO     [huggingface.py:481] Using model type 'default'
2024-10-30:10:24:43,215 INFO     [huggingface.py:365] Model parallel was set to False, max memory was not set, and device map was set to {'': 'cuda'}
Loading checkpoint shards:   0%|          | 0/8 [00:00<?, ?it/s]Loading checkpoint shards:  12%|█▎        | 1/8 [00:05<00:37,  5.39s/it]Loading checkpoint shards:  25%|██▌       | 2/8 [00:10<00:30,  5.10s/it]Loading checkpoint shards:  38%|███▊      | 3/8 [00:15<00:24,  4.99s/it]Loading checkpoint shards:  50%|█████     | 4/8 [00:20<00:19,  4.99s/it]Loading checkpoint shards:  62%|██████▎   | 5/8 [00:25<00:15,  5.00s/it]Loading checkpoint shards:  75%|███████▌  | 6/8 [00:30<00:10,  5.00s/it]Loading checkpoint shards:  88%|████████▊ | 7/8 [00:35<00:05,  5.01s/it]Loading checkpoint shards: 100%|██████████| 8/8 [00:35<00:00,  3.64s/it]Loading checkpoint shards: 100%|██████████| 8/8 [00:35<00:00,  4.49s/it]
2024-10-30:10:25:37,726 WARNING  [evaluator.py:270] Overwriting default num_fewshot of medmcqa from None to 3
2024-10-30:10:25:37,727 WARNING  [model.py:422] model.chat_template was called with the chat_template set to False or None. Therefore no chat template will be applied. Make sure this is an intended behavior.
2024-10-30:10:25:37,729 INFO     [task.py:415] Building contexts for medmcqa on rank 0...
  0%|          | 0/4183 [00:00<?, ?it/s] 50%|████▉     | 2086/4183 [00:00<00:00, 20848.89it/s]100%|██████████| 4183/4183 [00:00<00:00, 21360.25it/s]
2024-10-30:10:25:38,268 INFO     [evaluator.py:489] Running loglikelihood requests
Running loglikelihood requests:   0%|          | 0/16732 [00:00<?, ?it/s]Running loglikelihood requests:   0%|          | 1/16732 [00:44<208:06:26, 44.78s/it]Running loglikelihood requests:   1%|          | 129/16732 [00:47<1:14:10,  3.73it/s]Running loglikelihood requests:   2%|▏         | 257/16732 [00:50<34:01,  8.07it/s]  Running loglikelihood requests:   2%|▏         | 385/16732 [00:53<21:05, 12.92it/s]Running loglikelihood requests:   3%|▎         | 513/16732 [00:56<14:53, 18.15it/s]Running loglikelihood requests:   4%|▍         | 641/16732 [00:58<11:25, 23.46it/s]Running loglikelihood requests:   5%|▍         | 769/16732 [01:01<09:18, 28.58it/s]Running loglikelihood requests:   5%|▌         | 897/16732 [01:04<07:55, 33.29it/s]Running loglikelihood requests:   6%|▌         | 1025/16732 [01:06<06:58, 37.51it/s]Running loglikelihood requests:   7%|▋         | 1153/16732 [01:08<06:16, 41.36it/s]Running loglikelihood requests:   8%|▊         | 1281/16732 [01:11<05:46, 44.54it/s]Running loglikelihood requests:   8%|▊         | 1409/16732 [01:13<05:24, 47.21it/s]Running loglikelihood requests:   9%|▉         | 1537/16732 [01:15<05:07, 49.41it/s]Running loglikelihood requests:  10%|▉         | 1665/16732 [01:18<04:53, 51.32it/s]Running loglikelihood requests:  11%|█         | 1793/16732 [01:20<04:43, 52.77it/s]Running loglikelihood requests:  11%|█▏        | 1921/16732 [01:22<04:34, 53.99it/s]Running loglikelihood requests:  12%|█▏        | 2049/16732 [01:24<04:26, 55.00it/s]Running loglikelihood requests:  13%|█▎        | 2177/16732 [01:27<04:20, 55.86it/s]Running loglikelihood requests:  14%|█▍        | 2305/16732 [01:29<04:15, 56.48it/s]Running loglikelihood requests:  15%|█▍        | 2433/16732 [01:31<04:10, 56.97it/s]Running loglikelihood requests:  15%|█▌        | 2561/16732 [01:33<04:07, 57.36it/s]Running loglikelihood requests:  16%|█▌        | 2689/16732 [01:35<04:02, 57.96it/s]Running loglikelihood requests:  17%|█▋        | 2817/16732 [01:38<03:58, 58.43it/s]Running loglikelihood requests:  18%|█▊        | 2945/16732 [01:40<03:54, 58.83it/s]Running loglikelihood requests:  18%|█▊        | 3073/16732 [01:42<03:50, 59.15it/s]Running loglikelihood requests:  19%|█▉        | 3201/16732 [01:44<03:47, 59.54it/s]Running loglikelihood requests:  20%|█▉        | 3329/16732 [01:46<03:43, 59.87it/s]Running loglikelihood requests:  21%|██        | 3457/16732 [01:48<03:40, 60.22it/s]Running loglikelihood requests:  21%|██▏       | 3585/16732 [01:50<03:37, 60.47it/s]Running loglikelihood requests:  22%|██▏       | 3713/16732 [01:52<03:33, 60.97it/s]Running loglikelihood requests:  23%|██▎       | 3841/16732 [01:54<03:29, 61.57it/s]Running loglikelihood requests:  24%|██▎       | 3969/16732 [01:56<03:25, 62.18it/s]Running loglikelihood requests:  24%|██▍       | 4097/16732 [01:58<03:21, 62.63it/s]Running loglikelihood requests:  25%|██▌       | 4225/16732 [02:00<03:18, 63.00it/s]Running loglikelihood requests:  26%|██▌       | 4353/16732 [02:02<03:15, 63.35it/s]Running loglikelihood requests:  27%|██▋       | 4481/16732 [02:04<03:12, 63.66it/s]Running loglikelihood requests:  28%|██▊       | 4609/16732 [02:06<03:09, 63.90it/s]Running loglikelihood requests:  28%|██▊       | 4737/16732 [02:08<03:06, 64.17it/s]Running loglikelihood requests:  29%|██▉       | 4865/16732 [02:10<03:04, 64.44it/s]Running loglikelihood requests:  30%|██▉       | 4993/16732 [02:12<03:01, 64.65it/s]Running loglikelihood requests:  31%|███       | 5121/16732 [02:14<02:57, 65.26it/s]Running loglikelihood requests:  31%|███▏      | 5249/16732 [02:16<02:54, 65.70it/s]Running loglikelihood requests:  32%|███▏      | 5377/16732 [02:18<02:51, 66.05it/s]Running loglikelihood requests:  33%|███▎      | 5505/16732 [02:20<02:49, 66.33it/s]Running loglikelihood requests:  34%|███▎      | 5633/16732 [02:22<02:46, 66.69it/s]Running loglikelihood requests:  34%|███▍      | 5761/16732 [02:24<02:43, 66.96it/s]Running loglikelihood requests:  35%|███▌      | 5889/16732 [02:26<02:41, 67.20it/s]Running loglikelihood requests:  36%|███▌      | 6017/16732 [02:27<02:38, 67.50it/s]Running loglikelihood requests:  37%|███▋      | 6145/16732 [02:29<02:36, 67.71it/s]Running loglikelihood requests:  37%|███▋      | 6273/16732 [02:31<02:34, 67.91it/s]Running loglikelihood requests:  38%|███▊      | 6401/16732 [02:33<02:31, 68.08it/s]Running loglikelihood requests:  39%|███▉      | 6529/16732 [02:35<02:29, 68.29it/s]Running loglikelihood requests:  40%|███▉      | 6657/16732 [02:37<02:27, 68.44it/s]Running loglikelihood requests:  41%|████      | 6785/16732 [02:39<02:25, 68.60it/s]Running loglikelihood requests:  41%|████▏     | 6913/16732 [02:41<02:22, 68.71it/s]Running loglikelihood requests:  42%|████▏     | 7041/16732 [02:42<02:20, 68.82it/s]Running loglikelihood requests:  43%|████▎     | 7169/16732 [02:44<02:18, 69.09it/s]Running loglikelihood requests:  44%|████▎     | 7297/16732 [02:46<02:16, 69.36it/s]Running loglikelihood requests:  44%|████▍     | 7425/16732 [02:48<02:13, 69.54it/s]Running loglikelihood requests:  45%|████▌     | 7553/16732 [02:50<02:11, 69.67it/s]Running loglikelihood requests:  46%|████▌     | 7681/16732 [02:52<02:09, 69.77it/s]Running loglikelihood requests:  47%|████▋     | 7809/16732 [02:53<02:07, 70.21it/s]Running loglikelihood requests:  47%|████▋     | 7937/16732 [02:55<02:04, 70.56it/s]Running loglikelihood requests:  48%|████▊     | 8065/16732 [02:57<02:02, 70.82it/s]Running loglikelihood requests:  49%|████▉     | 8193/16732 [02:59<02:00, 71.04it/s]Running loglikelihood requests:  50%|████▉     | 8321/16732 [03:00<01:58, 71.20it/s]Running loglikelihood requests:  50%|█████     | 8449/16732 [03:02<01:55, 71.52it/s]Running loglikelihood requests:  51%|█████▏    | 8577/16732 [03:04<01:53, 71.75it/s]Running loglikelihood requests:  52%|█████▏    | 8705/16732 [03:06<01:51, 71.94it/s]Running loglikelihood requests:  53%|█████▎    | 8833/16732 [03:08<01:49, 72.12it/s]Running loglikelihood requests:  54%|█████▎    | 8961/16732 [03:09<01:47, 72.24it/s]Running loglikelihood requests:  54%|█████▍    | 9089/16732 [03:11<01:45, 72.47it/s]Running loglikelihood requests:  55%|█████▌    | 9217/16732 [03:13<01:43, 72.66it/s]Running loglikelihood requests:  56%|█████▌    | 9345/16732 [03:15<01:41, 72.82it/s]Running loglikelihood requests:  57%|█████▋    | 9473/16732 [03:16<01:39, 72.98it/s]Running loglikelihood requests:  57%|█████▋    | 9601/16732 [03:18<01:37, 73.26it/s]Running loglikelihood requests:  58%|█████▊    | 9729/16732 [03:20<01:35, 73.48it/s]Running loglikelihood requests:  59%|█████▉    | 9857/16732 [03:22<01:33, 73.66it/s]Running loglikelihood requests:  60%|█████▉    | 9985/16732 [03:23<01:31, 73.83it/s]Running loglikelihood requests:  60%|██████    | 10113/16732 [03:25<01:29, 73.97it/s]Running loglikelihood requests:  61%|██████    | 10241/16732 [03:27<01:27, 74.05it/s]Running loglikelihood requests:  62%|██████▏   | 10369/16732 [03:28<01:25, 74.33it/s]Running loglikelihood requests:  63%|██████▎   | 10497/16732 [03:30<01:23, 74.55it/s]Running loglikelihood requests:  64%|██████▎   | 10625/16732 [03:32<01:21, 74.78it/s]Running loglikelihood requests:  64%|██████▍   | 10753/16732 [03:33<01:19, 74.96it/s]Running loglikelihood requests:  65%|██████▌   | 10881/16732 [03:35<01:17, 75.40it/s]Running loglikelihood requests:  66%|██████▌   | 11009/16732 [03:37<01:15, 75.67it/s]Running loglikelihood requests:  67%|██████▋   | 11137/16732 [03:39<01:13, 75.92it/s]Running loglikelihood requests:  67%|██████▋   | 11265/16732 [03:40<01:11, 76.15it/s]Running loglikelihood requests:  68%|██████▊   | 11393/16732 [03:42<01:09, 76.35it/s]Running loglikelihood requests:  69%|██████▉   | 11521/16732 [03:44<01:08, 76.49it/s]Running loglikelihood requests:  70%|██████▉   | 11649/16732 [03:45<01:06, 76.75it/s]Running loglikelihood requests:  70%|███████   | 11777/16732 [03:47<01:04, 76.94it/s]Running loglikelihood requests:  71%|███████   | 11905/16732 [03:48<01:02, 77.09it/s]Running loglikelihood requests:  72%|███████▏  | 12033/16732 [03:50<01:00, 77.22it/s]Running loglikelihood requests:  73%|███████▎  | 12161/16732 [03:52<00:59, 77.35it/s]Running loglikelihood requests:  73%|███████▎  | 12289/16732 [03:53<00:57, 77.74it/s]Running loglikelihood requests:  74%|███████▍  | 12417/16732 [03:55<00:55, 78.00it/s]Running loglikelihood requests:  75%|███████▍  | 12545/16732 [03:57<00:53, 78.18it/s]Running loglikelihood requests:  76%|███████▌  | 12673/16732 [03:58<00:51, 78.38it/s]Running loglikelihood requests:  77%|███████▋  | 12801/16732 [04:00<00:50, 78.56it/s]Running loglikelihood requests:  77%|███████▋  | 12929/16732 [04:02<00:48, 78.68it/s]Running loglikelihood requests:  78%|███████▊  | 13057/16732 [04:03<00:46, 78.90it/s]Running loglikelihood requests:  79%|███████▉  | 13185/16732 [04:05<00:44, 79.05it/s]Running loglikelihood requests:  80%|███████▉  | 13313/16732 [04:06<00:43, 79.20it/s]Running loglikelihood requests:  80%|████████  | 13441/16732 [04:08<00:41, 79.35it/s]Running loglikelihood requests:  81%|████████  | 13569/16732 [04:10<00:39, 79.51it/s]Running loglikelihood requests:  82%|████████▏ | 13697/16732 [04:11<00:38, 79.57it/s]Running loglikelihood requests:  83%|████████▎ | 13825/16732 [04:13<00:36, 80.15it/s]Running loglikelihood requests:  83%|████████▎ | 13953/16732 [04:14<00:34, 80.56it/s]Running loglikelihood requests:  84%|████████▍ | 14081/16732 [04:16<00:32, 80.93it/s]Running loglikelihood requests:  85%|████████▍ | 14209/16732 [04:17<00:31, 81.24it/s]Running loglikelihood requests:  86%|████████▌ | 14337/16732 [04:19<00:29, 81.71it/s]Running loglikelihood requests:  86%|████████▋ | 14465/16732 [04:21<00:27, 82.03it/s]Running loglikelihood requests:  87%|████████▋ | 14593/16732 [04:22<00:25, 82.33it/s]Running loglikelihood requests:  88%|████████▊ | 14721/16732 [04:24<00:24, 82.55it/s]Running loglikelihood requests:  89%|████████▊ | 14849/16732 [04:25<00:22, 82.76it/s]Running loglikelihood requests:  90%|████████▉ | 14977/16732 [04:27<00:21, 83.26it/s]Running loglikelihood requests:  90%|█████████ | 15105/16732 [04:28<00:19, 83.68it/s]Running loglikelihood requests:  91%|█████████ | 15233/16732 [04:30<00:17, 84.06it/s]Running loglikelihood requests:  92%|█████████▏| 15361/16732 [04:31<00:16, 84.50it/s]Running loglikelihood requests:  93%|█████████▎| 15489/16732 [04:33<00:14, 84.83it/s]Running loglikelihood requests:  93%|█████████▎| 15617/16732 [04:34<00:13, 85.12it/s]Running loglikelihood requests:  94%|█████████▍| 15745/16732 [04:36<00:11, 85.37it/s]Running loglikelihood requests:  95%|█████████▍| 15873/16732 [04:37<00:09, 86.24it/s]Running loglikelihood requests:  96%|█████████▌| 16001/16732 [04:39<00:08, 87.05it/s]Running loglikelihood requests:  96%|█████████▋| 16129/16732 [04:40<00:06, 88.01it/s]Running loglikelihood requests:  97%|█████████▋| 16257/16732 [04:41<00:05, 88.83it/s]Running loglikelihood requests:  98%|█████████▊| 16385/16732 [04:43<00:03, 89.66it/s]Running loglikelihood requests:  99%|█████████▊| 16513/16732 [04:44<00:02, 90.67it/s]Running loglikelihood requests:  99%|█████████▉| 16641/16732 [04:45<00:00, 100.31it/s]Running loglikelihood requests: 100%|██████████| 16732/16732 [04:45<00:00, 58.58it/s] 
2024-10-30:10:30:37,626 WARNING  [huggingface.py:1353] Failed to get model SHA for /mnt/dg_tunning/full_meditron_7b at revision main. Error: Repo id must be in the form 'repo_name' or 'namespace/repo_name': '/mnt/dg_tunning/full_meditron_7b'. Use `repo_type` argument if needed.
2024-10-30:10:30:40,662 INFO     [evaluation_tracker.py:269] Output path not provided, skipping saving results aggregated
Passed argument batch_size = auto:1. Detecting largest batch size
Determined largest batch size: 32
hf (pretrained=epfl-llm/meditron-7b,dtype=float16,low_cpu_mem_usage=True,trust_remote_code=True,peft=/mnt/dg_tunning/full_meditron_7b), gen_kwargs: (None), limit: None, num_fewshot: 3, batch_size: auto (32)
| Tasks |Version|Filter|n-shot| Metric |   |Value |   |Stderr|
|-------|-------|------|-----:|--------|---|-----:|---|-----:|
|medmcqa|Yaml   |none  |     3|acc     |↑  |0.3505|±  |0.0074|
|       |       |none  |     3|acc_norm|↑  |0.3505|±  |0.0074|

