nohup: ignoring input
2024-10-30:18:06:28,256 INFO     [__main__.py:279] Verbosity set to INFO
2024-10-30:18:06:34,295 INFO     [__init__.py:459] The tag 'arc_ca' is already registered as a group, this tag will not be registered. This may affect tasks you want to call.
2024-10-30:18:06:34,303 INFO     [__init__.py:459] The tag 'arc_ca' is already registered as a group, this tag will not be registered. This may affect tasks you want to call.
2024-10-30:18:06:37,540 INFO     [__main__.py:376] Selected Tasks: ['medqa_4options']
2024-10-30:18:06:37,547 INFO     [evaluator.py:164] Setting random seed to 0 | Setting numpy seed to 1234 | Setting torch manual seed to 1234 | Setting fewshot manual seed to 1234
2024-10-30:18:06:37,547 INFO     [evaluator.py:201] Initializing hf model, with arguments: {'pretrained': 'epfl-llm/meditron-7b', 'dtype': 'float16', 'low_cpu_mem_usage': True, 'trust_remote_code': True, 'peft': '/mnt/dg_tunning/lora4_meditron_7b'}
2024-10-30:18:06:37,840 WARNING  [other.py:349] Detected kernel version 5.4.0, which is below the recommended minimum of 5.5.0; this can cause the process to hang. It is recommended to upgrade the kernel to the minimum version or higher.
2024-10-30:18:06:37,841 INFO     [huggingface.py:129] Using device 'cuda'
2024-10-30:18:06:37,918 INFO     [huggingface.py:481] Using model type 'default'
2024-10-30:18:06:38,052 INFO     [huggingface.py:365] Model parallel was set to False, max memory was not set, and device map was set to {'': 'cuda'}
Loading checkpoint shards:   0%|          | 0/8 [00:00<?, ?it/s]Loading checkpoint shards:  12%|█▎        | 1/8 [00:01<00:13,  1.94s/it]Loading checkpoint shards:  25%|██▌       | 2/8 [00:03<00:10,  1.80s/it]Loading checkpoint shards:  38%|███▊      | 3/8 [00:05<00:08,  1.76s/it]Loading checkpoint shards:  50%|█████     | 4/8 [00:07<00:07,  1.78s/it]Loading checkpoint shards:  62%|██████▎   | 5/8 [00:08<00:05,  1.77s/it]Loading checkpoint shards:  75%|███████▌  | 6/8 [00:10<00:03,  1.74s/it]Loading checkpoint shards:  88%|████████▊ | 7/8 [00:12<00:01,  1.68s/it]Loading checkpoint shards: 100%|██████████| 8/8 [00:12<00:00,  1.24s/it]Loading checkpoint shards: 100%|██████████| 8/8 [00:12<00:00,  1.56s/it]
Generating train split:   0%|          | 0/10178 [00:00<?, ? examples/s]Generating train split: 100%|██████████| 10178/10178 [00:00<00:00, 193410.77 examples/s]
Generating validation split:   0%|          | 0/1272 [00:00<?, ? examples/s]Generating validation split: 100%|██████████| 1272/1272 [00:00<00:00, 131339.82 examples/s]
Generating test split:   0%|          | 0/1273 [00:00<?, ? examples/s]Generating test split: 100%|██████████| 1273/1273 [00:00<00:00, 135187.08 examples/s]
2024-10-30:18:06:53,354 WARNING  [evaluator.py:270] Overwriting default num_fewshot of medqa_4options from None to 3
2024-10-30:18:06:53,354 WARNING  [model.py:422] model.chat_template was called with the chat_template set to False or None. Therefore no chat template will be applied. Make sure this is an intended behavior.
2024-10-30:18:06:53,356 INFO     [task.py:415] Building contexts for medqa_4options on rank 0...
  0%|          | 0/1273 [00:00<?, ?it/s]100%|██████████| 1273/1273 [00:00<00:00, 23469.98it/s]
2024-10-30:18:06:53,489 INFO     [evaluator.py:489] Running loglikelihood requests
Running loglikelihood requests:   0%|          | 0/5092 [00:00<?, ?it/s]Running loglikelihood requests:   0%|          | 1/5092 [00:57<81:58:40, 57.97s/it]Running loglikelihood requests:   1%|▏         | 65/5092 [01:03<59:20,  1.41it/s]  Running loglikelihood requests:   3%|▎         | 129/5092 [01:08<28:07,  2.94it/s]Running loglikelihood requests:   4%|▍         | 193/5092 [01:13<17:54,  4.56it/s]Running loglikelihood requests:   5%|▌         | 257/5092 [01:17<13:02,  6.18it/s]Running loglikelihood requests:   6%|▋         | 321/5092 [01:22<10:18,  7.72it/s]Running loglikelihood requests:   8%|▊         | 385/5092 [01:26<08:36,  9.12it/s]Running loglikelihood requests:   9%|▉         | 449/5092 [01:31<07:29, 10.33it/s]Running loglikelihood requests:  10%|█         | 513/5092 [01:35<06:43, 11.35it/s]Running loglikelihood requests:  11%|█▏        | 577/5092 [01:40<06:09, 12.21it/s]Running loglikelihood requests:  13%|█▎        | 641/5092 [01:44<05:45, 12.90it/s]Running loglikelihood requests:  14%|█▍        | 705/5092 [01:48<05:26, 13.43it/s]Running loglikelihood requests:  15%|█▌        | 769/5092 [01:53<05:11, 13.90it/s]Running loglikelihood requests:  16%|█▋        | 833/5092 [01:57<04:58, 14.26it/s]Running loglikelihood requests:  18%|█▊        | 897/5092 [02:01<04:48, 14.54it/s]Running loglikelihood requests:  19%|█▉        | 961/5092 [02:05<04:39, 14.79it/s]Running loglikelihood requests:  20%|██        | 1025/5092 [02:09<04:30, 15.02it/s]Running loglikelihood requests:  21%|██▏       | 1089/5092 [02:13<04:22, 15.22it/s]Running loglikelihood requests:  23%|██▎       | 1153/5092 [02:17<04:15, 15.41it/s]Running loglikelihood requests:  24%|██▍       | 1217/5092 [02:21<04:08, 15.58it/s]Running loglikelihood requests:  25%|██▌       | 1281/5092 [02:25<04:02, 15.74it/s]Running loglikelihood requests:  26%|██▋       | 1345/5092 [02:29<03:56, 15.87it/s]Running loglikelihood requests:  28%|██▊       | 1409/5092 [02:33<03:50, 16.00it/s]Running loglikelihood requests:  29%|██▉       | 1473/5092 [02:37<03:44, 16.11it/s]Running loglikelihood requests:  30%|███       | 1537/5092 [02:41<03:38, 16.26it/s]Running loglikelihood requests:  31%|███▏      | 1601/5092 [02:45<03:33, 16.38it/s]Running loglikelihood requests:  33%|███▎      | 1665/5092 [02:49<03:27, 16.51it/s]Running loglikelihood requests:  34%|███▍      | 1729/5092 [02:53<03:22, 16.63it/s]Running loglikelihood requests:  35%|███▌      | 1793/5092 [02:56<03:17, 16.73it/s]Running loglikelihood requests:  36%|███▋      | 1857/5092 [03:00<03:11, 16.86it/s]Running loglikelihood requests:  38%|███▊      | 1921/5092 [03:04<03:06, 16.97it/s]Running loglikelihood requests:  39%|███▉      | 1985/5092 [03:07<03:01, 17.09it/s]Running loglikelihood requests:  40%|████      | 2049/5092 [03:11<02:56, 17.20it/s]Running loglikelihood requests:  41%|████▏     | 2113/5092 [03:15<02:52, 17.29it/s]Running loglikelihood requests:  43%|████▎     | 2177/5092 [03:18<02:47, 17.38it/s]Running loglikelihood requests:  44%|████▍     | 2241/5092 [03:22<02:42, 17.49it/s]Running loglikelihood requests:  45%|████▌     | 2305/5092 [03:26<02:38, 17.58it/s]Running loglikelihood requests:  47%|████▋     | 2369/5092 [03:29<02:33, 17.70it/s]Running loglikelihood requests:  48%|████▊     | 2433/5092 [03:33<02:29, 17.79it/s]Running loglikelihood requests:  49%|████▉     | 2497/5092 [03:36<02:25, 17.87it/s]Running loglikelihood requests:  50%|█████     | 2561/5092 [03:40<02:20, 17.96it/s]Running loglikelihood requests:  52%|█████▏    | 2625/5092 [03:43<02:16, 18.09it/s]Running loglikelihood requests:  53%|█████▎    | 2689/5092 [03:47<02:11, 18.24it/s]Running loglikelihood requests:  54%|█████▍    | 2753/5092 [03:50<02:07, 18.35it/s]Running loglikelihood requests:  55%|█████▌    | 2817/5092 [03:54<02:03, 18.45it/s]Running loglikelihood requests:  57%|█████▋    | 2881/5092 [03:57<01:59, 18.54it/s]Running loglikelihood requests:  58%|█████▊    | 2945/5092 [04:00<01:55, 18.62it/s]Running loglikelihood requests:  59%|█████▉    | 3009/5092 [04:04<01:51, 18.69it/s]Running loglikelihood requests:  60%|██████    | 3073/5092 [04:07<01:47, 18.85it/s]Running loglikelihood requests:  62%|██████▏   | 3137/5092 [04:10<01:43, 18.97it/s]Running loglikelihood requests:  63%|██████▎   | 3201/5092 [04:14<01:39, 19.07it/s]Running loglikelihood requests:  64%|██████▍   | 3265/5092 [04:17<01:35, 19.19it/s]Running loglikelihood requests:  65%|██████▌   | 3329/5092 [04:20<01:31, 19.32it/s]Running loglikelihood requests:  67%|██████▋   | 3393/5092 [04:24<01:27, 19.40it/s]Running loglikelihood requests:  68%|██████▊   | 3457/5092 [04:27<01:23, 19.54it/s]Running loglikelihood requests:  69%|██████▉   | 3521/5092 [04:30<01:19, 19.68it/s]Running loglikelihood requests:  70%|███████   | 3585/5092 [04:33<01:16, 19.82it/s]Running loglikelihood requests:  72%|███████▏  | 3649/5092 [04:36<01:12, 19.92it/s]Running loglikelihood requests:  73%|███████▎  | 3713/5092 [04:39<01:08, 20.04it/s]Running loglikelihood requests:  74%|███████▍  | 3777/5092 [04:43<01:05, 20.19it/s]Running loglikelihood requests:  75%|███████▌  | 3841/5092 [04:46<01:01, 20.34it/s]Running loglikelihood requests:  77%|███████▋  | 3905/5092 [04:49<00:58, 20.45it/s]Running loglikelihood requests:  78%|███████▊  | 3969/5092 [04:52<00:54, 20.61it/s]Running loglikelihood requests:  79%|███████▉  | 4033/5092 [04:55<00:51, 20.73it/s]Running loglikelihood requests:  80%|████████  | 4097/5092 [04:58<00:47, 21.00it/s]Running loglikelihood requests:  82%|████████▏ | 4161/5092 [05:01<00:43, 21.21it/s]Running loglikelihood requests:  83%|████████▎ | 4225/5092 [05:04<00:40, 21.41it/s]Running loglikelihood requests:  84%|████████▍ | 4289/5092 [05:07<00:37, 21.63it/s]Running loglikelihood requests:  85%|████████▌ | 4353/5092 [05:09<00:33, 21.82it/s]Running loglikelihood requests:  87%|████████▋ | 4417/5092 [05:12<00:30, 22.07it/s]Running loglikelihood requests:  88%|████████▊ | 4481/5092 [05:15<00:27, 22.34it/s]Running loglikelihood requests:  89%|████████▉ | 4545/5092 [05:18<00:24, 22.58it/s]Running loglikelihood requests:  91%|█████████ | 4609/5092 [05:21<00:21, 22.79it/s]Running loglikelihood requests:  92%|█████████▏| 4673/5092 [05:23<00:18, 23.04it/s]Running loglikelihood requests:  93%|█████████▎| 4737/5092 [05:26<00:15, 23.27it/s]Running loglikelihood requests:  94%|█████████▍| 4801/5092 [05:29<00:12, 23.57it/s]Running loglikelihood requests:  96%|█████████▌| 4865/5092 [05:31<00:09, 23.96it/s]Running loglikelihood requests:  97%|█████████▋| 4929/5092 [05:34<00:06, 24.39it/s]Running loglikelihood requests:  98%|█████████▊| 4993/5092 [05:36<00:03, 25.11it/s]Running loglikelihood requests:  99%|█████████▉| 5057/5092 [05:37<00:01, 29.17it/s]Running loglikelihood requests: 100%|██████████| 5092/5092 [05:37<00:00, 15.07it/s]
2024-10-30:18:12:45,094 WARNING  [huggingface.py:1353] Failed to get model SHA for /mnt/dg_tunning/lora4_meditron_7b at revision main. Error: Repo id must be in the form 'repo_name' or 'namespace/repo_name': '/mnt/dg_tunning/lora4_meditron_7b'. Use `repo_type` argument if needed.
2024-10-30:18:12:48,189 INFO     [evaluation_tracker.py:269] Output path not provided, skipping saving results aggregated
Passed argument batch_size = auto:1. Detecting largest batch size
Determined largest batch size: 16
hf (pretrained=epfl-llm/meditron-7b,dtype=float16,low_cpu_mem_usage=True,trust_remote_code=True,peft=/mnt/dg_tunning/lora4_meditron_7b), gen_kwargs: (None), limit: None, num_fewshot: 3, batch_size: auto (16)
|    Tasks     |Version|Filter|n-shot| Metric |   |Value |   |Stderr|
|--------------|-------|------|-----:|--------|---|-----:|---|-----:|
|medqa_4options|Yaml   |none  |     3|acc     |↑  |0.3763|±  |0.0136|
|              |       |none  |     3|acc_norm|↑  |0.3763|±  |0.0136|

